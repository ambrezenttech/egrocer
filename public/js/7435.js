"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7435],{7435:(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var a=e(9669),i=e.n(a),r=e(9756);const o={data:function(){return{isLoading:!1,statuses:[],mail_statuses:[],mobile_statuses:[],settings:{username:r.Z.user.username,current_password:"",password:"",confirm_password:""}}},created:function(){this.getOrderStatus(),this.getMailSetting()},methods:{getOrderStatus:function(){var s=this,t=this;i().get(this.$apiUrl+"/order_statuses").then((function(t){s.isLoading=!1,s.statuses=t.data.data,console.log("this.statuses =>",s.statuses)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},getMailSetting:function(){var s=this,t=this;i().get(this.$apiUrl+"/mail_settings").then((function(t){s.isLoading=!1,t.data.data.forEach((function(t){1===t.mail_status&&s.mail_statuses.push(t.order_status_id),1===t.mobile_status&&s.mobile_statuses.push(t.order_status_id)}))})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},saveMailSetting:function(){var s=this,t=this;this.isLoading=!0;var e=new FormData;this.statuses.forEach((function(t){e.append("status_ids[]",t.id),s.mail_statuses.includes(t.id)?e.append("mail_statuses[]","1"):e.append("mail_statuses[]","0"),s.mobile_statuses.includes(t.id)?e.append("mobile_statuses[]","1"):e.append("mobile_statuses[]","0")})),i().post(this.$apiUrl+"/mail_settings/save",e).then((function(e){var a=e.data;t.isLoading=!1,1===a.status?(t.showSuccess(a.message),s.getMailSetting()):t.showError(a.message)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},saveRecord:function(){var s=this,t=this;this.isLoading=!0,i().post(this.$apiUrl+"/system_users/change_password",this.settings).then((function(e){var a=e.data;if(t.isLoading=!1,1===a.status){t.showMessage("success",a.message);var i=r.Z.user.role_id;3===i?s.$router.push("/seller"):4===i?s.$router.push("/delivery_boy"):s.$router.push({path:"/"})}else t.showError(a.message)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))}}};const n=(0,e(1900).Z)(o,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("div",{staticClass:"page-heading"},[e("h3",[s._v(s._s(s.__("settings")))])]),s._v(" "),e("div",{staticClass:"page-content"},[e("section",{staticClass:"row"},[e("div",{staticClass:"col-12 col-lg-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6 col-md-6"},[e("form",{on:{submit:function(t){return t.preventDefault(),s.saveMailSetting.apply(null,arguments)}}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body px-3 py-4-5"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h3",[s._v(s._s(s.__("order_mail_settings")))]),s._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"col-8 col-md-8 mb-2 offset-md-1"},[e("div",{staticClass:"row d-flex justify-content-between "},[e("div",{staticClass:"col-6"},[e("h6",[s._v(s._s(s.__("order_status")))])]),s._v(" "),e("div",{staticClass:"col-3"},[e("h6",[s._v(s._s(s.__("mail")))])]),s._v(" "),e("div",{staticClass:"col-3"},[e("h6",[s._v(s._s(s.__("mobile")))])])]),s._v(" "),s._l(s.statuses,(function(t,a){return e("div",{staticClass:"row d-flex justify-content-between "},[e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"checkbox_"+t.id}},[s._v(" "+s._s(s.formattedName(t.status))+" ")])]),s._v(" "),e("div",{staticClass:"form-check form-switch col-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.mail_statuses,expression:"mail_statuses"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"checkbox_"+t.id},domProps:{value:t.id,checked:s.mail_statuses.includes(t.id),checked:Array.isArray(s.mail_statuses)?s._i(s.mail_statuses,t.id)>-1:s.mail_statuses},on:{change:function(e){var a=s.mail_statuses,i=e.target,r=!!i.checked;if(Array.isArray(a)){var o=t.id,n=s._i(a,o);i.checked?n<0&&(s.mail_statuses=a.concat([o])):n>-1&&(s.mail_statuses=a.slice(0,n).concat(a.slice(n+1)))}else s.mail_statuses=r}}})]),s._v(" "),e("div",{staticClass:"form-check form-switch col-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.mobile_statuses,expression:"mobile_statuses"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"checkbox_"+t.id},domProps:{value:t.id,checked:s.mobile_statuses.includes(t.id),checked:Array.isArray(s.mobile_statuses)?s._i(s.mobile_statuses,t.id)>-1:s.mobile_statuses},on:{change:function(e){var a=s.mobile_statuses,i=e.target,r=!!i.checked;if(Array.isArray(a)){var o=t.id,n=s._i(a,o);i.checked?n<0&&(s.mobile_statuses=a.concat([o])):n>-1&&(s.mobile_statuses=a.slice(0,n).concat(a.slice(n+1)))}else s.mobile_statuses=r}}})])])}))],2)])])])]),s._v(" "),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isLoading}},[s._v("\n                                            "+s._s(s.__("save"))+" "),s.isLoading?e("b-spinner",{attrs:{small:"",label:"Spinning"}}):s._e()],1),s._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return s.$router.go(-1)}}},[s._v(s._s(s.__("back")))])])])])]),s._v(" "),e("div",{staticClass:"col-lg-6 col-md-6"},[e("form",{on:{submit:function(t){return t.preventDefault(),s.saveRecord.apply(null,arguments)}}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body px-3 py-4-5"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h3",[s._v(s._s(s.__("change_username_and_password")))]),s._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[s._v(s._s(s.__("username")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.username,expression:"settings.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:s.__("username"),required:""},domProps:{value:s.settings.username},on:{input:function(t){t.target.composing||s.$set(s.settings,"username",t.target.value)}}})]),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"current_password"}},[s._v(s._s(s.__("current_password")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.current_password,expression:"settings.current_password"}],staticClass:"form-control",attrs:{type:"password",id:"current_password",placeholder:s.__("current_password"),required:""},domProps:{value:s.settings.current_password},on:{input:function(t){t.target.composing||s.$set(s.settings,"current_password",t.target.value)}}})]),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"password"}},[s._v(s._s(s.__("password")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.password,expression:"settings.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:s.__("password"),required:""},domProps:{value:s.settings.password},on:{input:function(t){t.target.composing||s.$set(s.settings,"password",t.target.value)}}})]),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"confirm_password"}},[s._v(s._s(s.__("confirm_password")))]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.confirm_password,expression:"settings.confirm_password"}],staticClass:"form-control",attrs:{type:"password",id:"confirm_password",placeholder:s.__("confirm_password"),required:""},domProps:{value:s.settings.confirm_password},on:{input:function(t){t.target.composing||s.$set(s.settings,"confirm_password",t.target.value)}}})])])])])]),s._v(" "),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isLoading}},[s._v("\n                                        "+s._s(s.__("save"))+" "),s.isLoading?e("b-spinner",{attrs:{small:"",label:"Spinning"}}):s._e()],1),s._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return s.$router.go(-1)}}},[s._v(s._s(s.__("back")))])])])])])])])])])])}),[],!1,null,null,null).exports}}]);