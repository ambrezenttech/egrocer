"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9720],{9054:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(9669),i=a.n(r);const s={data:function(){return{center:{lat:0,lng:0},currentPlace:null,markers:[],city:{id:"",latitude:"",longitude:"",name:"",state:"",formatted_address:"",time_to_travel:"",min_amount_for_free_delivery:"",max_deliverable_distance:"",delivery_charge_method:"",fixed_charge:"",per_km_charge:"",range_wise_charges:[{from_range:"",to_range:"",price:""}]},formatted_address:"",infoWindow:{position:{lat:0,lng:0},open:!1,template:""}}},mounted:function(){},computed:{google:a(6292).gmapApi},created:function(){this.city.id=this.$route.params.id,this.city.id&&this.getCity()},methods:{addRow:function(){this.city.range_wise_charges.push({from_range:"",to_range:"",price:""})},remove:function(e){this.city.range_wise_charges.splice(e,1)},setPlace:function(e){this.currentPlace=e,this.addMarker()},addMarker:function(){if(this.currentPlace){var e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:e}),this.center=e,this.city.latitude=this.currentPlace.geometry.location.lat(),this.city.longitude=this.currentPlace.geometry.location.lng(),this.city.name=this.currentPlace.name;var t=this.currentPlace.formatted_address.split(",");this.city.state=t[t.length-2],this.city.formatted_address=this.currentPlace.formatted_address,this.infoWindow.position={lat:this.city.latitude,lng:this.city.longitude},this.infoWindow.template="<b>".concat(this.city.name,"</b><br>").concat(this.city.formatted_address),this.infoWindow.open=!0,this.currentPlace=null}},getCity:function(){var e=this;this.isLoading=!0,i().get(this.$apiUrl+"/cities/edit/"+this.city.id).then((function(t){e.isLoading=!1;var a=t.data.data;for(var r in e.city)e.city[r]="range_wise_charges"===r?JSON.parse(a[r]):a[r];var i={lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)};e.markers.push({position:i}),e.center=i,e.infoWindow.position={lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)},e.infoWindow.template="<b>".concat(a.name,"</b><br>").concat(e.city.formatted_address),e.infoWindow.open=!0}))},checkMaximumDistance:function(){var e=this;if("range_wise_charges"===this.city.delivery_charge_method){var t=parseFloat(this.city.max_deliverable_distance);return this.city.range_wise_charges.map((function(a,r){var i=r+1,s=parseFloat(a.to_range),o=parseFloat(a.from_range);return s>t||o>t?(e.showError("Range wise delivery distance is more then maximum deliverable distance no row no. :- "+i),!1):s<=o?(e.showError("Range wise From distance is more then To distance no row no. :- "+i),!1):void 0}))}},saveRecord:function(){var e=this;if(!1===this.checkMaximumDistance())return!1;var t=this;this.isLoading=!0;var a=this.city,r=new FormData;for(var s in a)"range_wise_charges"===s?r.append(s,JSON.stringify(a[s])):r.append(s,a[s]);var o=this.$apiUrl+"/cities/save";this.city.id&&(o=this.$apiUrl+"/cities/update"),i().post(o,r).then((function(a){var r=a.data;1===r.status?(e.showMessage("success",r.message),setTimeout((function(){t.$swal.close(),t.$router.push({path:"/cities"})}),2e3)):(t.showError(r.message),t.isLoading=!1)})).catch((function(a){t.isLoading=!1,a.request.statusText?e.showError(a.request.statusText):a.message?e.showError(a.message):e.showError("Something went wrong!")}))}}};const o=(0,a(1900).Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page-heading"},[a("div",{staticClass:"row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-12 col-md-6 order-md-2 order-first"},[a("nav",{staticClass:"breadcrumb-header float-start float-lg-end",attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/dashboard"}},[e._v(e._s(e.__("dashboard")))])],1),e._v(" "),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e.city.id?[e._v("\n                                    Edit\n                                ")]:[e._v("\n                                    Create\n                                ")],e._v("\n                                City\n                            ")],2)])])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 col-md-6 order-md-1 order-last"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-header"},[a("h4",[e.city.id?[e._v("Edit")]:[e._v("Create")],e._v("\n                                City\n                            ")],2)]),e._v(" "),a("div",{staticClass:"card-body"},[a("form",{ref:"my-form",on:{submit:function(t){return t.preventDefault(),e.saveRecord.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"city_name"}},[e._v("Search City")]),e._v(" "),a("GmapAutocomplete",{staticClass:"form-control",attrs:{type:"search",placeholder:"Search City on map.",options:{fields:["address_components","formatted_address","geometry","name","place_id","plus_code","types"],strictBounds:!1},id:"city_name"},on:{place_changed:e.setPlace}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.formatted_address,expression:"city.formatted_address"}],attrs:{type:"hidden"},domProps:{value:e.city.formatted_address},on:{input:function(t){t.target.composing||e.$set(e.city,"formatted_address",t.target.value)}}}),e._v(" "),a("span",{staticClass:"text text-primary"},[e._v("Search your city where you will deliver the food and to find co-ordinates.")])],1),e._v(" "),a("div",{staticClass:"form-group"},[e._m(1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.latitude,expression:"city.latitude"}],staticClass:"form-control",attrs:{type:"text",name:"latitude",id:"latitude",placeholder:"Enter Latitude.",required:"",readonly:""},domProps:{value:e.city.latitude},on:{input:function(t){t.target.composing||e.$set(e.city,"latitude",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(2),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.longitude,expression:"city.longitude"}],staticClass:"form-control",attrs:{type:"text",name:"longitude",id:"longitude",placeholder:"Enter Longitude.",required:"",readonly:""},domProps:{value:e.city.longitude},on:{input:function(t){t.target.composing||e.$set(e.city,"longitude",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(3),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.name,expression:"city.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",placeholder:"Enter City Name.",required:"",readonly:""},domProps:{value:e.city.name},on:{input:function(t){t.target.composing||e.$set(e.city,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(4),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.state,expression:"city.state"}],staticClass:"form-control",attrs:{type:"text",name:"state",id:"state",placeholder:"Enter State Name.",required:"",readonly:""},domProps:{value:e.city.state},on:{input:function(t){t.target.composing||e.$set(e.city,"state",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(5),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.time_to_travel,expression:"city.time_to_travel"}],staticClass:"form-control",attrs:{type:"number",name:"time_to_travel",id:"time_to_travel",min:"0",placeholder:"Enter Time to travel 1 (km).",required:""},domProps:{value:e.city.time_to_travel},on:{input:function(t){t.target.composing||e.$set(e.city,"time_to_travel",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"min_amount_for_free_delivery"}},[e._v("Minimum Amount for Free Delivery"),a("span",{staticClass:"text-danger text-xs"},[e._v("*")]),e._v(" "),a("small",[e._v("[ "+e._s(e.$currency)+" ]")])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.min_amount_for_free_delivery,expression:"city.min_amount_for_free_delivery"}],staticClass:"form-control",attrs:{type:"number",name:"min_amount_for_free_delivery",id:"min_amount_for_free_delivery",placeholder:"Enter Delivarable Maximum Distance in km",min:"0",required:""},domProps:{value:e.city.min_amount_for_free_delivery},on:{input:function(t){t.target.composing||e.$set(e.city,"min_amount_for_free_delivery",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(6),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.max_deliverable_distance,expression:"city.max_deliverable_distance"}],staticClass:"form-control",attrs:{type:"number",name:"max_deliverable_distance",id:"max_deliverable_distance",placeholder:"Enter Delivarable Maximum Distance in km",min:"0",required:""},domProps:{value:e.city.max_deliverable_distance},on:{input:function(t){t.target.composing||e.$set(e.city,"max_deliverable_distance",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(7),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.city.delivery_charge_method,expression:"city.delivery_charge_method"}],staticClass:"form-control form-select",attrs:{name:"delivery_charge_method",id:"delivery_charge_method",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.city,"delivery_charge_method",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Method")]),e._v(" "),a("option",{attrs:{value:"fixed_charge"}},[e._v("Fixed Delivery Charges")]),e._v(" "),a("option",{attrs:{value:"per_km_charge"}},[e._v("Per KM Delivery Charges")]),e._v(" "),a("option",{attrs:{value:"range_wise_charges"}},[e._v("Range Wise Delivery Charges")])])]),e._v(" "),"fixed_charge"===e.city.delivery_charge_method?a("div",{staticClass:"form-group"},[e._m(8),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.fixed_charge,expression:"city.fixed_charge"}],staticClass:"form-control",attrs:{type:"number",name:"fixed_charge",id:"fixed_charge",placeholder:"Global Flat Charges",min:"0"},domProps:{value:e.city.fixed_charge},on:{input:function(t){t.target.composing||e.$set(e.city,"fixed_charge",t.target.value)}}})]):e._e(),e._v(" "),"per_km_charge"===e.city.delivery_charge_method?a("div",{staticClass:"form-group"},[e._m(9),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.city.per_km_charge,expression:"city.per_km_charge"}],staticClass:"form-control",attrs:{type:"number",name:"per_km_charge",id:"per_km_charge",placeholder:"Per Kilometer Delivery Charge",min:"0"},domProps:{value:e.city.per_km_charge},on:{input:function(t){t.target.composing||e.$set(e.city,"per_km_charge",t.target.value)}}})]):e._e(),e._v(" "),"range_wise_charges"===e.city.delivery_charge_method?a("div",{staticClass:"form-group col-sm-12"},[e._m(10),e._v(" "),e._l(e.city.range_wise_charges,(function(t,r){return a("div",{key:e.key=r+1,staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[e._v(e._s(e.key)+".")]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from_range,expression:"range.from_range"}],staticClass:"form-control",attrs:{type:"number",name:"from_range[]",id:"from_range",placeholder:"From Range",min:"0"},domProps:{value:t.from_range},on:{input:function(a){a.target.composing||e.$set(t,"from_range",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-sm-1 btn btn-secondary"},[e._v("To")]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.to_range,expression:"range.to_range"}],staticClass:"form-control",attrs:{type:"number",name:"to_range[]",id:"to_range",placeholder:"To Range",min:"0"},domProps:{value:t.to_range},on:{focusout:function(t){return e.checkMaximumDistance()},input:function(a){a.target.composing||e.$set(t,"to_range",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"range.price"}],staticClass:"form-control",attrs:{type:"number",name:"price[]",id:"price",placeholder:"Price",min:"0"},domProps:{value:t.price},on:{input:function(a){a.target.composing||e.$set(t,"price",a.target.value)}}})]),e._v(" "),0===r?a("div",{staticClass:"col-sm-1"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{cursor:"pointer"},attrs:{title:"Add Row"},on:{click:e.addRow}},[a("i",{staticClass:"fa fa-plus-square fa-2x"})])]):e._e(),e._v(" "),0!==r?a("div",{staticClass:"col-sm-1"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{cursor:"pointer"},attrs:{title:"Remove Row"},on:{click:function(t){return e.remove(r)}}},[a("i",{staticClass:"fa fa-times fa-2x"})])]):e._e()])}))],2):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(" "+e._s(e.__("save")))]),e._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"reset"}},[e._v(e._s(e.__("clear")))])])])])])]),e._v(" "),a("div",{staticClass:"col-6 col-md-6 order-md-1 order-last"},[a("div",{staticClass:"card h-100"},[e._m(11),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticStyle:{position:"relative",overflow:"hidden"},attrs:{id:"map"}},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"600px","margin-top":"20px"},attrs:{center:e.center,zoom:13,mapTypeControl:!0}},[e._l(e.markers,(function(t,r){return a("GmapMarker",{key:r,attrs:{position:t.position},on:{click:function(a){e.center=t.position}}})})),e._v(" "),a("gmap-info-window",{attrs:{options:{maxWidth:300,pixelOffset:{width:0,height:-35}},position:e.infoWindow.position,opened:e.infoWindow.open},on:{closeclick:function(t){e.infoWindow.open=!1}}},[a("div",{domProps:{innerHTML:e._s(e.infoWindow.template)}})])],2)],1),e._v(" "),e.city.formatted_address?a("div",[a("span",{staticClass:"title font-weight-bolder"},[e._v(e._s(e.city.formatted_address))])]):e._e()])])])])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 col-md-6 order-md-1 order-last"},[a("h3",[e._v("Manage City")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"latitude"}},[e._v("Latitude "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"longitude"}},[e._v("Longitude "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"name"}},[e._v("City Name "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"state"}},[e._v("State Name "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"time_to_travel"}},[e._v("Time to travel 1 (km) "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")]),e._v(" "),a("small",[e._v("(Enter in minutes)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"max_deliverable_distance"}},[e._v(" Maximum Delivarable Distance"),a("span",{staticClass:"text-danger text-xs"},[e._v("*")]),e._v(" "),a("small",[e._v("[Kilometre]")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:" col-12 col-form-label",attrs:{for:"delivery_charge_method"}},[e._v("Delivery Charge\n                                        Methods "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"fixed_charge"}},[e._v("Fixed Delivery Charges "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"per_km_charge"}},[e._v("Per KM Delivery Charges "),a("span",{staticClass:"text-danger text-sm"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[e._v("Range Wise Delivery Charges "),a("span",{staticClass:"text-danger text-sm"},[e._v("* ")]),e._v(" "),a("span",{staticClass:"text-secondary text-sm"},[e._v("(Set Proper ranges for delivery charge. Do not repeat the range value to next range. For e.g. 1-3,4-6)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-header"},[a("h4",[e._v("Map View")])])}],!1,null,null,null).exports}}]);