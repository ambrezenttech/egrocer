"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1112],{5021:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(9669),o=s.n(a);const r={props:["record"],data:function(){return{isLoading:!1,sellerCommissions:null}},created:function(){this.getSellerCommissions()},computed:{modal_title:function(){return"Set Category Wise Saller Commission"}},methods:{showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()},getSellerCommissions:function(){var e=this;this.isLoading=!0;var t=this.record.seller_id?this.record.seller_id:this.record.id;o().get(this.$apiUrl+"/seller_commissions/formData/"+t).then((function(t){e.isLoading=!1;var s=t.data;console.log("data =>",s),e.sellerCommissions=s.data}))},saveRecord:function(){var e=this,t=this;this.isLoading=!0;var s=this.sellerCommissions,a=this.$apiUrl+"/seller_commissions/save";o().post(a,s).then((function(s){var a=s.data;console.log("Response:"),console.log(a),1===a.status?(console.log("Response : Success"),e.$eventBus.$emit("commissionsSaved",a.message),e.hideModal()):(t.showError(a.message),t.isLoading=!1)})).catch((function(s){t.isLoading=!1,s.request.statusText?e.showError(s.request.statusText):s.message?e.showError(s.message):e.showError("Something went wrong!")}))}},mounted:function(){this.showModal()}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"my-modal",attrs:{title:e.modal_title,"no-fade":"",static:""},on:{hidden:function(t){return e.$emit("modalClose")}}},[s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{variant:"primary",disabled:e.isLoading},on:{click:function(t){return e.$refs.dummy_submit.click()}}},[e._v("Save\n            "),e.isLoading?s("b-spinner",{attrs:{small:"",label:"Spinning"}}):e._e()],1),e._v(" "),s("b-button",{attrs:{variant:"secondary"},on:{click:e.hideModal}},[e._v("Cancel")])],1),e._v(" "),s("form",{ref:"my-form",on:{submit:function(t){return t.preventDefault(),e.saveRecord.apply(null,arguments)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-1"},[s("h6",{staticClass:"modal-title"},[e._v("ID")])]),e._v(" "),s("div",{staticClass:"col-md-2"},[s("h6",{staticClass:"modal-title"},[e._v("Category Name")])]),e._v(" "),s("div",{staticClass:"col-md-9"},[s("h6",{staticClass:"modal-title"},[e._v("Commission(%)\n                    "),s("br"),s("small",[e._v("[Keep blank if you want to apply global Commission for particular category]")])])])]),e._v(" "),e._l(e.sellerCommissions,(function(t){return[s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-1"},[e._v("\n                    "+e._s(t.category_id)+"\n                ")]),e._v(" "),s("div",{staticClass:"col-md-2"},[e._v("\n                    "+e._s(t.category_name)+"\n                ")]),e._v(" "),s("div",{staticClass:"col-md-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.commission,expression:"sellerCommission.commission"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Enter Commission of "+t.category_name},domProps:{value:t.commission},on:{input:function(s){s.target.composing||e.$set(t,"commission",s.target.value)}}})])])]})),e._v(" "),s("button",{ref:"dummy_submit",staticStyle:{display:"none"}})],2)])}),[],!1,null,"15a7e79e",null).exports},1112:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});const a={components:{"app-edit-record":s(5021).Z},data:function(){return{fields:[{key:"id",label:"ID",sortable:!0,sortDirection:"desc"},{key:"name",label:"Name",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"store_name",label:"Store Name",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"email",label:"Email",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"mobile",label:"Mobile No.",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"balance",label:"Balance",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"logo",label:"Logo",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"commission",label:"Commi.(%)",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"categories",label:"Categories",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"catWiseEditCommission",label:"Cat. Wise Comm.",class:"text-center"},{key:"status",label:"Status",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"require_products_approval",label:"Pr. Approved?",class:"text-center",sortable:!0,sortDirection:"desc"},{key:"actions",label:"Action"}],totalRows:1,currentPage:1,perPage:this.$perPage,pageOptions:this.$pageOptions,sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],page:1,isLoading:!1,sectionStyle:"style_1",max_visible_units:12,max_col_in_single_row:3,records:[],edit_record:null,filterStatus:""}},created:function(){var e=this;this.category_id=this.$route.params.id,this.$eventBus.$on("recordSaved",(function(t){e.showMessage("success",t),e.getRecords()})),this.$eventBus.$on("commissionsSaved",(function(t){e.showMessage("success",t),e.getRecords()})),this.getRecords()},methods:{getRecords:function(){var e=this;this.isLoading=!0,axios.get(this.$apiUrl+"/sellers",{params:{filterStatus:this.filterStatus}}).then((function(t){e.isLoading=!1;var s=t.data;e.records=s.data}))},deleteSeller:function(e,t){var s=this;this.$swal.fire({title:"Are you Sure?",text:"You want be able to revert this",confirmButtonText:"Yes, Sure",cancelButtonText:"Cancel",icon:"warning",showCancelButton:!0,confirmButtonColor:"#37a279",cancelButtonColor:"#d33"}).then((function(a){if(a.value){s.isLoading=!0;var o={id:t};axios.post(s.$apiUrl+"/sellers/delete",o).then((function(t){s.isLoading=!1;var a=t.data;s.records.splice(e,1),s.showMessage("success",a.message)}))}}))},updateSellerCommission:function(){var e=this;this.$swal.fire({title:"Are you sure you want to credit seller commission?",text:"You want be able to revert this",confirmButtonText:"Yes, Sure",cancelButtonText:"Cancel",icon:"warning",showCancelButton:!0,confirmButtonColor:"#37a279",cancelButtonColor:"#d33"}).then((function(t){t.value&&(e.isLoading=!0,axios.get(e.$apiUrl+"/sellers/updateCommission").then((function(t){var s=t.data;1===s.status?e.showMessage("success",s.message):e.showError(s.message),e.isLoading=!1})))}))},hideModal:function(){this.edit_record=!1}}};const o=(0,s(1900).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page-heading"},[s("div",{staticClass:"row"},[e._m(0),e._v(" "),s("div",{staticClass:"col-12 col-md-6 order-md-2 order-first"},[s("nav",{staticClass:"breadcrumb-header float-start float-lg-end",attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/dashboard"}},[e._v(e._s(e.__("dashboard")))])],1),e._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v("Manage Sellers")])])])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-12 order-md-1 order-last"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h4",[e._v("Sellers")]),e._v(" "),s("span",{staticClass:"pull-right"},[s("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)",title:"If you found seller commission not crediting using cron job you can update seller commission from here!"},on:{click:function(t){return e.updateSellerCommission()}}},[e._v("Update seller commission")]),e._v(" "),e.$can("seller_create")?s("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-primary",attrs:{to:"/sellers/create",title:"Add New Seller"}},[e._v("Add Seller")]):e._e()],1)]),e._v(" "),s("div",{staticClass:"card-body"},[s("b-row",[s("b-col",{attrs:{md:"3"}},[s("div",{staticClass:"form-group"},[s("h6",{attrs:{for:"filterStatus"}},[e._v("Filter Seller by Status ")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.filterStatus,expression:"filterStatus"}],staticClass:"form-control form-select",attrs:{id:"filterStatus",name:"filterStatus"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterStatus=t.target.multiple?s:s[0]},function(t){return e.getRecords()}]}},[s("option",{attrs:{value:""}},[e._v("All")]),e._v(" "),s("option",{attrs:{value:"0"}},[e._v("Registered")]),e._v(" "),s("option",{attrs:{value:"1"}},[e._v("Approved")]),e._v(" "),s("option",{attrs:{value:"2"}},[e._v("Not-Approved")]),e._v(" "),s("option",{attrs:{value:"3"}},[e._v("Deactivate")]),e._v(" "),s("option",{attrs:{value:"7"}},[e._v("Removed")])])])]),e._v(" "),s("b-col",{attrs:{md:"3","offset-md":"5"}},[s("h6",{staticClass:"box-title"},[e._v("Search")]),e._v(" "),s("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),s("b-col",{staticClass:"text-center",attrs:{md:"1"}},[s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-primary btn_refresh",attrs:{title:e.__("refresh")},on:{click:function(t){return e.getRecords()}}},[s("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])])],1),e._v(" "),s("b-row",{staticClass:"table-responsive"},[s("b-table",{attrs:{items:e.records,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"filter-included-fields":e.filterOn,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,bordered:!0,busy:e.isLoading,stacked:"md","show-empty":"",small:""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-black my-2"},[s("b-spinner",{staticClass:"align-middle"}),e._v(" "),s("strong",[e._v(e._s(e.__("loading"))+"...")])],1)]},proxy:!0},{key:"cell(email)",fn:function(t){return[e._v("\n                                "+e._s(e._f("emailMask")(t.item.email))+"\n                            ")]}},{key:"cell(mobile)",fn:function(t){return[e._v("\n                                "+e._s(e._f("mobileMask")(t.item.mobile))+"\n                            ")]}},{key:"cell(logo)",fn:function(t){return[t.item.logo?s("img",{attrs:{src:e.$storageUrl+t.item.logo,height:"50"}}):s("span",[e._v("No Image")])]}},{key:"cell(catWiseEditCommission)",fn:function(t){return[e.$can("seller_update")?s("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(s){e.edit_record=t.item}}},[s("i",{staticClass:"fa fa-edit"})]):e._e()]}},{key:"cell(status)",fn:function(t){return[0==t.item.status?s("label",{staticClass:"badge bg-primary"},[e._v("Registered")]):1==t.item.status?s("label",{staticClass:"badge bg-success"},[e._v("Approved")]):2==t.item.status?s("label",{staticClass:"badge bg-warning"},[e._v("Not-Approved")]):3==t.item.status?s("label",{staticClass:"badge bg-danger"},[e._v("Deactive")]):7==t.item.status?s("label",{staticClass:"badge bg-danger"},[e._v("Removed")]):e._e()]}},{key:"cell(require_products_approval)",fn:function(t){return[1==t.item.require_products_approval?s("label",{staticClass:"badge bg-success"},[e._v("Yes")]):0==t.item.require_products_approval?s("label",{staticClass:"badge bg-danger"},[e._v("No")]):e._e()]}},{key:"cell(actions)",fn:function(t){return[e.$can("seller_update")?s("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"EditSeller",params:{id:t.item.id,record:t.item}},title:"Edit",title:e.__("edit")}},[s("i",{staticClass:"fa fa-pencil"})]):e._e(),e._v(" "),e.$can("seller_delete")?s("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-danger",attrs:{title:e.__("delete")},on:{click:function(s){return e.deleteSeller(t.index,t.item.id)}}},[s("i",{staticClass:"fa fa-trash"})]):e._e()]}}])})],1),e._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:e.__("per_page"),"label-for":"per-page-select","label-align-sm":"right","label-size":"sm"}},[s("b-form-select",{staticClass:"form-control form-select",attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),e._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4","offset-md":"6"}},[s("label",[e._v("Total Records :- "+e._s(e.totalRows)+" ")]),e._v(" "),s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)])])])]),e._v(" "),e.edit_record?s("app-edit-record",{attrs:{record:e.edit_record},on:{modalClose:function(t){return e.hideModal()}}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12 col-md-6 order-md-1 order-last"},[s("h3",[e._v("Manage Sellers")])])}],!1,null,null,null).exports}}]);